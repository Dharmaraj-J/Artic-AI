<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Speech to Text</title>
    <script src="https://cdn.jsdelivr.net/npm/recorderjs/dist/recorder.min.js"></script>
</head>
<body>
    <button id="start-recording">Record</button>
    <button id="stop-recording" disabled>Stop</button>
    <p id="recognized-text"></p>

    <script>
        $('#speech-to-text-form').submit(function(event) {
            event.preventDefault();
            var formData = new FormData(this);
            $.ajax({
                url: '/speech-to-text/',
                type: 'POST',
                data: formData,
                processData: false,
                contentType: false,
                success: function(text) {
                    $('#recognized-text').text(text);
                },
                error: function(xhr, status, error) {
                    console.error('Could not recognize speech:', error);
                }
            });
        });
        
    </script>
</body>
</html>































































































<!-- 
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Speech to Text</title>
</head>
<body>
    <form method="POST">
        {% csrf_token %}
        <button type="submit">Speak</button>
    </form>
    {% if text %}
        <p>Recognized Text: {{ text }}</p>
    {% endif %}
</body>
</html> -->
















# from django.shortcuts import render
# import speech_recognition as sr

# def index(request):
#     if request.method == 'POST':
#         r = sr.Recognizer()
#         with sr.Microphone() as source:
#             r.adjust_for_ambient_noise(source)
#             audio = r.listen(source)
#         try:
#             text = r.recognize_google(audio)
#         except sr.UnknownValueError:
#             text = "Sorry, could not understand"
#         except sr.RequestError as e:
#             text = "Could not request results; {0}".format(e)

#         context = {'text': text}
#         return render(request, 'speech_to_text.html', context)
#      else:
#         return render(request, 'speech_to_text.html')



# from django.shortcuts import render
# import speech_recognition as sr
# import os

# def index(request):
#     if request.method == 'POST':
#         r = sr.Recognizer()
#         with sr.Microphone() as source:
#             r.adjust_for_ambient_noise(source)
#             audio = r.listen(source)

#         # Save the audio file to the server
#         filename = os.path.join(os.path.dirname(__file__), 'audio.wav')
#         with open(filename, 'wb') as f:
#             f.write(audio.get_wav_data())

#         # Use SpeechRecognition to recognize the text from the saved audio file
#         with sr.AudioFile(filename) as source:
#             audio_data = r.record(source)
#             try:
#                 text = r.recognize_google(audio_data)
#             except sr.UnknownValueError:
#                 text = "Sorry, could not understand"
#             except sr.RequestError as e:
#                 text = "Could not request results; {0}".format(e)

#         context = {'text': text}
#         return render(request, 'speech_to_text.html', context)
#     else:
#         return render(request, 'speech_to_text.html')
